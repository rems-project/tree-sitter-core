-- Aggregates
def union _G_fpos64_t :=
  __opaque: 'char[16]'
  __lldata: 'signed long_long'
  __align: 'double'

def struct __cerbty_unnamed_tag_677 :=
  __dummy_max_align_t: 'void*'

def struct __cerbty_unnamed_tag_681 :=
  quot: 'intmax_t'
  rem: 'intmax_t'

def struct div :=
  quot: 'signed int'
  rem: 'signed int'

def struct ldiv :=
  quot: 'signed long'
  rem: 'signed long'

def struct lldiv :=
  quot: 'signed long_long'
  rem: 'signed long_long'

-- Globals
glob a_948: pointer [ail_ctype = 'char[14]'] :=
  create_readonly(Ivalignof('char[14]'), 'char[14]', Specified(Array(Specified(conv_int('char',
  79)), Specified(conv_int('char', 114)), Specified(conv_int('char', 105)),
  Specified(conv_int('char', 103)), Specified(conv_int('char', 105)),
  Specified(conv_int('char', 110)), Specified(conv_int('char', 97)),
  Specified(conv_int('char', 108)), Specified(conv_int('char', 58)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 37)),
  Specified(conv_int('char', 115)), Specified(conv_int('char', 10)),
  Specified(0))))

glob a_983: pointer [ail_ctype = 'char[14]'] :=
  create_readonly(Ivalignof('char[14]'), 'char[14]', Specified(Array(Specified(conv_int('char',
  77)), Specified(conv_int('char', 111)), Specified(conv_int('char', 100)),
  Specified(conv_int('char', 105)), Specified(conv_int('char', 102)),
  Specified(conv_int('char', 105)), Specified(conv_int('char', 101)),
  Specified(conv_int('char', 100)), Specified(conv_int('char', 58)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 37)),
  Specified(conv_int('char', 115)), Specified(conv_int('char', 10)),
  Specified(0))))

glob a_1022: pointer [ail_ctype = 'char[5]'] :=
  create_readonly(Ivalignof('char[5]'), 'char[5]', Specified(Array(Specified(conv_int('char',
  110)), Specified(conv_int('char', 117)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 108)), Specified(0))))

glob a_1026: pointer [ail_ctype = 'char[9]'] :=
  create_readonly(Ivalignof('char[9]'), 'char[9]', Specified(Array(Specified(conv_int('char',
  110)), Specified(conv_int('char', 111)), Specified(conv_int('char', 116)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 110)),
  Specified(conv_int('char', 117)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 108)), Specified(0))))

glob a_1052: pointer [ail_ctype = 'char[4]'] :=
  create_readonly(Ivalignof('char[4]'), 'char[4]', Specified(Array(Specified(conv_int('char',
  37)), Specified(conv_int('char', 115)), Specified(conv_int('char', 32)),
  Specified(0))))

glob a_1093: pointer [ail_ctype = 'char[5]'] :=
  create_readonly(Ivalignof('char[5]'), 'char[5]', Specified(Array(Specified(conv_int('char',
  37)), Specified(conv_int('char', 48)), Specified(conv_int('char', 50)),
  Specified(conv_int('char', 120)), Specified(0))))

glob a_1140: pointer [ail_ctype = 'char[2]'] :=
  create_readonly(Ivalignof('char[2]'), 'char[2]', Specified(Array(Specified(conv_int('char',
  10)), Specified(0))))

glob a_1214: pointer [ail_ctype = 'char[26]'] :=
  create_readonly(Ivalignof('char[26]'), 'char[26]', Specified(Array(Specified(conv_int('char',
  109)), Specified(conv_int('char', 97)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 108)), Specified(conv_int('char', 111)),
  Specified(conv_int('char', 99)), Specified(conv_int('char', 40)),
  Specified(conv_int('char', 41)), Specified(conv_int('char', 32)),
  Specified(conv_int('char', 102)), Specified(conv_int('char', 97)),
  Specified(conv_int('char', 105)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 101)), Specified(conv_int('char', 100)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 105)),
  Specified(conv_int('char', 110)), Specified(conv_int('char', 32)),
  Specified(conv_int('char', 96)), Specified(conv_int('char', 115)),
  Specified(conv_int('char', 112)), Specified(conv_int('char', 116)),
  Specified(conv_int('char', 114)), Specified(conv_int('char', 96)),
  Specified(0))))

glob a_1229: pointer [ail_ctype = 'char[4]'] :=
  create_readonly(Ivalignof('char[4]'), 'char[4]', Specified(Array(Specified(conv_int('char',
  37)), Specified(conv_int('char', 35)), Specified(conv_int('char', 112)),
  Specified(0))))

glob a_1269: pointer [ail_ctype = 'char[31]'] :=
  create_readonly(Ivalignof('char[31]'), 'char[31]', Specified(Array(Specified(conv_int('char',
  109)), Specified(conv_int('char', 97)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 108)), Specified(conv_int('char', 111)),
  Specified(conv_int('char', 99)), Specified(conv_int('char', 40)),
  Specified(conv_int('char', 41)), Specified(conv_int('char', 32)),
  Specified(conv_int('char', 102)), Specified(conv_int('char', 97)),
  Specified(conv_int('char', 105)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 101)), Specified(conv_int('char', 100)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 105)),
  Specified(conv_int('char', 110)), Specified(conv_int('char', 32)),
  Specified(conv_int('char', 96)), Specified(conv_int('char', 110)),
  Specified(conv_int('char', 117)), Specified(conv_int('char', 108)),
  Specified(conv_int('char', 108)), Specified(conv_int('char', 95)),
  Specified(conv_int('char', 115)), Specified(conv_int('char', 112)),
  Specified(conv_int('char', 116)), Specified(conv_int('char', 114)),
  Specified(conv_int('char', 96)), Specified(0))))

glob a_1284: pointer [ail_ctype = 'char[27]'] :=
  create_readonly(Ivalignof('char[27]'), 'char[27]', Specified(Array(Specified(conv_int('char',
  37)), Specified(conv_int('char', 35)), Specified(conv_int('char', 120)),
  Specified(conv_int('char', 97)), Specified(conv_int('char', 32)),
  Specified(conv_int('char', 91)), Specified(conv_int('char', 37)),
  Specified(conv_int('char', 80)), Specified(conv_int('char', 44)),
  Specified(conv_int('char', 37)), Specified(conv_int('char', 35)),
  Specified(conv_int('char', 120)), Specified(conv_int('char', 98)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 45)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 37)),
  Specified(conv_int('char', 35)), Specified(conv_int('char', 120)),
  Specified(conv_int('char', 116)), Specified(conv_int('char', 93)),
  Specified(conv_int('char', 37)), Specified(conv_int('char', 63)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 37)),
  Specified(conv_int('char', 65)), Specified(0))))

glob a_1325: pointer [ail_ctype = 'char[15]'] :=
  create_readonly(Ivalignof('char[15]'), 'char[15]', Specified(Array(Specified(conv_int('char',
  115)), Specified(conv_int('char', 116)), Specified(conv_int('char', 114)),
  Specified(conv_int('char', 102)), Specified(conv_int('char', 99)),
  Specified(conv_int('char', 97)), Specified(conv_int('char', 112)),
  Specified(conv_int('char', 32)), Specified(conv_int('char', 101)),
  Specified(conv_int('char', 114)), Specified(conv_int('char', 114)),
  Specified(conv_int('char', 111)), Specified(conv_int('char', 114)),
  Specified(conv_int('char', 10)), Specified(0))))

-- Fun map
proc main (): eff loaded integer :=
  let strong buf: pointer = create(Ivalignof('char[1024]'), 'char[1024]') in
  let strong x: pointer = create(Ivalignof('char*'), 'char*') in
  let strong y: pointer = create(Ivalignof('char*'), 'char*') in
  let strong z: pointer = create(Ivalignof('char*'), 'char*') in
  store('char[1024]', buf, Unspecified('char[1024]')) ;
  let strong a_914: loaded pointer =
    bound(
      let weak a_915: pointer = pure(buf) in
      let weak a_916: pointer = memop(PtrArrayShift, a_915, 'char', 0) in
      pure(Specified(a_916))
    ) in
  store('char*', x, a_914) ;
  let strong a_917: loaded pointer =
    bound(
      let strong a_923: loaded pointer =
        let weak a_918: loaded pointer =
          let weak a_920: pointer = pure(x) in
          load('char*', a_920) in
        case a_918 of
          | Specified(a_919: pointer) =>
              let weak a_921: boolean =
                memop(PtrWellAligned, 'char', a_919) in
              pure(
                Specified(if a_921 then
                  a_919
                else
                  undef(<<UB025_misaligned_pointer_conversion>>))
              )
          | Unspecified(_: ctype) =>
              pure(undef(<<UB025_misaligned_pointer_conversion>>))
        end in
      case a_923 of
        | Specified(a_924: pointer) =>
            memop(cheri_cheri_tag_clear['char* (char*)'], a_924)
        | _: loaded pointer =>
            pure(undef(<<DUMMY(Elab, CHERI intrinsics (unspec))>>))
      end
    ) in
  store('char*', y, a_917) ;
  let strong a_925: loaded pointer =
    bound(
      let strong a_934: (loaded pointer,loaded integer) =
        unseq(
          let weak a_927: loaded pointer =
            let weak a_929: pointer = pure(y) in
            load('char*', a_929) in
          case a_927 of
            | Specified(a_928: pointer) =>
                let weak a_930: boolean =
                  memop(PtrWellAligned, 'char', a_928) in
                pure(
                  Specified(if a_930 then
                    a_928
                  else
                    undef(<<UB025_misaligned_pointer_conversion>>))
                )
            | Unspecified(_: ctype) =>
                pure(undef(<<UB025_misaligned_pointer_conversion>>))
          end
        ,
          let weak a_926: loaded integer = pure(Specified(10)) in
          pure(conv_loaded_int('size_t', a_926))
        ) in
      case a_934 of
        | (Specified(a_935: pointer), Specified(a_936: integer)) =>
            memop(cheri_cheri_bounds_set['char* (char*, size_t)'], a_935,
            a_936)
        | _: (loaded pointer,loaded integer) =>
            pure(undef(<<DUMMY(Elab, CHERI intrinsics (unspec))>>))
      end
    ) in
  store('char*', z, a_925) ;
  let strong _: loaded integer =
    bound(
      let strong ((a_937: loaded pointer,
      (a_938: ctype, a_939: [ctype], a_940: boolean, a_941: boolean)),
      a_945: loaded pointer, a_947: loaded pointer, a_951: loaded pointer) =
        unseq(
          let strong a_913: loaded pointer =
            pure(Specified(Cfunction(fprintf))) in
          pure((a_913, cfunction(a_913)))
        ,
          let weak a_946: pointer = pure(__stderr) in
          load('struct _IO_FILE*', a_946)
        ,
          let weak a_949: pointer = pure(a_948) in
          let weak a_950: pointer = memop(PtrArrayShift, a_949, 'char', 0) in
          pure(Specified(a_950))
        ,
          let strong ((a_953: loaded pointer,
          (a_954: ctype, a_955: [ctype], a_956: boolean, a_957: boolean)),
          a_959: loaded pointer) =
            unseq(
              let strong a_952: loaded pointer =
                pure(Specified(Cfunction(sptr))) in
              pure((a_952, cfunction(a_952)))
            ,
              let weak a_962: pointer = pure(x) in
              load('char*', a_962)
            ) in
          if not(params_length(a_955) = 1) then
            pure(undef(<<UB038_number_of_args>>))
          else
            if a_956 \/ not(are_compatible ('const char*', a_954)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let strong a_958: pointer =
                let a_964: ctype = params_nth(a_955, 0) in
                if not(are_compatible ('void*', a_964)) then
                  pure(undef(<<UB041_function_not_compatible>>))
                else
                  let weak a_965: pointer =
                    create(Ivalignof('void*'), 'void*') in
                  let weak _: unit = store('void*', a_965, a_959) in
                  pure(a_965) in
              let strong a_966: loaded pointer =
                ccall('const char* (*) (void*)', a_953, a_958) in
              kill('void*', a_958) ;
              pure(a_966)
        ) in
      if not(params_length(a_939) <= 3) then
        pure(undef(<<UB038_number_of_args>>))
      else
        if not(a_940) \/ not(are_compatible ('signed int', a_938)) then
          pure(undef(<<UB041_function_not_compatible>>))
        else
          let strong a_944: pointer =
            let a_967: ctype = params_nth(a_939, 0) in
            if not(are_compatible ('struct _IO_FILE*', a_967)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let weak a_968: pointer =
                create(Ivalignof('struct _IO_FILE*'), 'struct _IO_FILE*') in
              let weak _: unit = store('struct _IO_FILE*', a_968, a_945) in
              pure(a_968) in
          let strong a_943: pointer =
            let a_969: ctype = params_nth(a_939, 1) in
            if not(are_compatible ('const char*', a_969)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let weak a_970: pointer =
                create(Ivalignof('const char*'), 'const char*') in
              let weak _: unit = store('const char*', a_970, a_947) in
              pure(a_970) in
          let strong a_942: pointer =
            pcall(create_and_store, 'const char*', a_951) in
          let strong a_971: loaded integer =
            ccall('signed int (*) (struct _IO_FILE*restrict , const char*restrict , ...)',
            a_937, a_944, a_943, [('const char*', a_942)]) in
          let strong _: (unit,unit,unit) =
            unseq(
              kill('struct _IO_FILE*', a_944)
            ,
              kill('char*', a_943)
            ,
              kill('char*', a_942)
            ) in
          pure(a_971)
    ) in
  pure(Unit) ;
  let strong _: loaded integer =
    bound(
      let strong ((a_972: loaded pointer,
      (a_973: ctype, a_974: [ctype], a_975: boolean, a_976: boolean)),
      a_980: loaded pointer, a_982: loaded pointer, a_986: loaded pointer) =
        unseq(
          let strong a_912: loaded pointer =
            pure(Specified(Cfunction(fprintf))) in
          pure((a_912, cfunction(a_912)))
        ,
          let weak a_981: pointer = pure(__stderr) in
          load('struct _IO_FILE*', a_981)
        ,
          let weak a_984: pointer = pure(a_983) in
          let weak a_985: pointer = memop(PtrArrayShift, a_984, 'char', 0) in
          pure(Specified(a_985))
        ,
          let strong ((a_988: loaded pointer,
          (a_989: ctype, a_990: [ctype], a_991: boolean, a_992: boolean)),
          a_994: loaded pointer) =
            unseq(
              let strong a_987: loaded pointer =
                pure(Specified(Cfunction(sptr))) in
              pure((a_987, cfunction(a_987)))
            ,
              let weak a_997: pointer = pure(z) in
              load('char*', a_997)
            ) in
          if not(params_length(a_990) = 1) then
            pure(undef(<<UB038_number_of_args>>))
          else
            if a_991 \/ not(are_compatible ('const char*', a_989)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let strong a_993: pointer =
                let a_999: ctype = params_nth(a_990, 0) in
                if not(are_compatible ('void*', a_999)) then
                  pure(undef(<<UB041_function_not_compatible>>))
                else
                  let weak a_1000: pointer =
                    create(Ivalignof('void*'), 'void*') in
                  let weak _: unit = store('void*', a_1000, a_994) in
                  pure(a_1000) in
              let strong a_1001: loaded pointer =
                ccall('const char* (*) (void*)', a_988, a_993) in
              kill('void*', a_993) ;
              pure(a_1001)
        ) in
      if not(params_length(a_974) <= 3) then
        pure(undef(<<UB038_number_of_args>>))
      else
        if not(a_975) \/ not(are_compatible ('signed int', a_973)) then
          pure(undef(<<UB041_function_not_compatible>>))
        else
          let strong a_979: pointer =
            let a_1002: ctype = params_nth(a_974, 0) in
            if not(are_compatible ('struct _IO_FILE*', a_1002)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let weak a_1003: pointer =
                create(Ivalignof('struct _IO_FILE*'), 'struct _IO_FILE*') in
              let weak _: unit = store('struct _IO_FILE*', a_1003, a_980) in
              pure(a_1003) in
          let strong a_978: pointer =
            let a_1004: ctype = params_nth(a_974, 1) in
            if not(are_compatible ('const char*', a_1004)) then
              pure(undef(<<UB041_function_not_compatible>>))
            else
              let weak a_1005: pointer =
                create(Ivalignof('const char*'), 'const char*') in
              let weak _: unit = store('const char*', a_1005, a_982) in
              pure(a_1005) in
          let strong a_977: pointer =
            pcall(create_and_store, 'const char*', a_986) in
          let strong a_1006: loaded integer =
            ccall('signed int (*) (struct _IO_FILE*restrict , const char*restrict , ...)',
            a_972, a_979, a_978, [('const char*', a_977)]) in
          let strong _: (unit,unit,unit) =
            unseq(
              kill('struct _IO_FILE*', a_979)
            ,
              kill('char*', a_978)
            ,
              kill('char*', a_977)
            ) in
          pure(a_1006)
    ) in
  pure(Unit) ;
  kill('char[1024]', buf) ;
  kill('char*', x) ;
  kill('char*', y) ;
  kill('char*', z) ;
  pure(Unit) ;
  save ret_911: loaded integer (a_1007: loaded integer:= Specified(0)) in
    pure(a_1007)

